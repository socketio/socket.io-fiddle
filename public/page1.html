<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Socket.IO Fiddle</title>
</head>
<body>
<h1>Page 1</h1>

<a href="index.html">Index</a>
<a href="page1.html">Page 1</a>
<a href="page2.html">Page 2</a>

<h2>Messages</h2>

<ul id="messages"></ul>

<button id="send-btn">Send message</button>

<script src="/socket.io/socket.io.js"></script>
<script>
  const messages = document.getElementById("messages");
  const sendButton = document.getElementById("send-btn");

  const socket = io();

  socket.emit("join:room", {
    roomId: "page1"
  });

  socket.on("text:inserted", ({ text }) => {
    const element = document.createElement("li");
    element.innerText = text;
    messages.appendChild(element);
  });

  sendButton.addEventListener("click", () => {
    socket.emit("text:insert", {
      roomId: "page1",
      text: "hello " + new Date().toISOString()
    });
  });
</script>
</body>
</html>
